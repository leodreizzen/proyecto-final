
/* !!! This is code generated by Prisma. Do not edit directly. !!! */
/* eslint-disable */
// biome-ignore-all lint: generated file
// @ts-nocheck 
import * as $runtime from "@prisma/client/runtime/client"

/**
 * @param query The search query string.
 * @param cursorUUID UUID of the last seen item (for pagination). Can be NULL for the first page.
 * @param limit Maximum number of results to return.
 */
export const keywordSearchResolutions = $runtime.makeTypedQueryFactory("\nWITH cursor_ref AS (\nSELECT MAX(ts_rank(to_tsvector('es_query', \"mainText\"), websearch_to_tsquery('es_query', $1::text))) as val\nFROM \"SearchableContent\"\nWHERE \"resolutionID\" = $2::uuid\nAND to_tsvector('es_query', \"mainText\") @@ websearch_to_tsquery('es_query', $1::text)\n),\ngrouped_resolutions AS (\nSELECT\n\"resolutionID\",\nMAX(ts_rank(to_tsvector('es_query', \"mainText\"), websearch_to_tsquery('es_query', $1::text))) as rank\nFROM \"SearchableContent\"\nWHERE\nto_tsvector('es_query', \"mainText\") @@ websearch_to_tsquery('es_query', $1::text)\nGROUP BY \"resolutionID\"\n)\nSELECT\n\"resolutionID\",\nrank\nFROM grouped_resolutions\nWHERE\n$2::uuid IS NULL\nOR\n(SELECT val FROM cursor_ref) IS NULL\nOR\n(\nrank < (SELECT val FROM cursor_ref)\nOR\n(\nrank = (SELECT val FROM cursor_ref)\nAND \"resolutionID\" > $2::uuid\n)\n)\nORDER BY\nrank DESC,\n\"resolutionID\" ASC\nLIMIT $3::int;") as (query: string, cursorUUID: string | null, limit: number) => $runtime.TypedSql<keywordSearchResolutions.Parameters, keywordSearchResolutions.Result>

export namespace keywordSearchResolutions {
  export type Parameters = [query: string, cursorUUID: string | null, limit: number]
  export type Result = {
    resolutionID: string
    rank: number | null
  }
}
