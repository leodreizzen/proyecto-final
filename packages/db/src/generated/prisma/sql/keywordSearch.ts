
/* !!! This is code generated by Prisma. Do not edit directly. !!! */
/* eslint-disable */
// biome-ignore-all lint: generated file
// @ts-nocheck 
import * as $runtime from "@prisma/client/runtime/client"

/**
 * @param query The search query string.
 * @param cursorUUID UUID of the last seen item (for pagination). Can be NULL for the first page.
 * @param limit Maximum number of results to return.
 */
export const keywordSearch = $runtime.makeTypedQueryFactory("\nWITH cursor_ref AS (\nSELECT ts_rank(to_tsvector('es_query', \"mainText\"), websearch_to_tsquery('es_query', $1::text)) as val\nFROM \"SearchableContent\"\nWHERE id = $2::uuid\n)\nSELECT\nid,\n\"mainText\",\nts_rank(to_tsvector('es_query', \"mainText\"), websearch_to_tsquery('es_query', $1::text)) as rank\nFROM \"SearchableContent\"\nWHERE\nto_tsvector('es_query', \"mainText\") @@ websearch_to_tsquery('es_query', $1::text)\nAND (\n$2::uuid IS NULL\nOR\n(SELECT val FROM cursor_ref) IS NULL\nOR\n(\nts_rank(to_tsvector('es_query', \"mainText\"), websearch_to_tsquery('es_query', $1::text)) < (SELECT val FROM cursor_ref)\nOR\n(\nts_rank(to_tsvector('es_query', \"mainText\"), websearch_to_tsquery('es_query', $1::text)) = (SELECT val FROM cursor_ref)\nAND id > $2::uuid\n)\n)\n)\nORDER BY\nrank DESC,\nid ASC\nLIMIT $3::int;") as (query: string, cursorUUID: string | null, limit: number) => $runtime.TypedSql<keywordSearch.Parameters, keywordSearch.Result>

export namespace keywordSearch {
  export type Parameters = [query: string, cursorUUID: string | null, limit: number]
  export type Result = {
    id: string
    mainText: string
    rank: number | null
  }
}
