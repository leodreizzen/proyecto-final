
/* !!! This is code generated by Prisma. Do not edit directly. !!! */
/* eslint-disable */
// biome-ignore-all lint: generated file
// @ts-nocheck 
import * as $runtime from "@prisma/client/runtime/client"

/**
 * @param targetResolutionUUUID UUID of the target Resolution
 */
export const getRelevantChanges = $runtime.makeTypedQueryFactory("WITH RECURSIVE\n\nStructuralChangeMap(change_id, target_ref_id, modifier_author_id, physical_origin_id) AS (\nSELECT change.id, repeal.\"targetReferenceId\", change.\"articleModifierId\", NULL::uuid\nFROM \"Change\" change JOIN \"ChangeRepeal\" repeal ON change.id = repeal.id\nUNION ALL\nSELECT change.id, replace_art.\"targetArticleReferenceId\", change.\"articleModifierId\", NULL::uuid\nFROM \"Change\" change JOIN \"ChangeReplaceArticle\" replace_art ON change.id = replace_art.id\nUNION ALL\nSELECT\nchange.id,\nreplace_annex.\"targetAnnexReferenceId\",\nchange.\"articleModifierId\",\nCOALESCE(ref_source.\"annexId\", inline_annex.id)\nFROM \"Change\" change\nJOIN \"ChangeReplaceAnnex\" replace_annex ON change.id = replace_annex.id\nLEFT JOIN \"ReferenceAnnex\" ref_source ON replace_annex.\"newAnnexReferenceId\" = ref_source.id\nLEFT JOIN \"Annex\" inline_annex ON inline_annex.\"changeReplaceAnnexId\" = change.id\nUNION ALL\nSELECT change.id, apply_mod.\"annexToApplyId\", change.\"articleModifierId\", ref_source.\"annexId\"\nFROM \"Change\" change\nJOIN \"ChangeApplyModificationsAnnex\" apply_mod ON change.id = apply_mod.id\nLEFT JOIN \"ReferenceAnnex\" ref_source ON apply_mod.\"annexToApplyId\" = ref_source.id\n),\n\nContentChangeMap(change_id, target_ref_id, modifier_author_id) AS (\nSELECT change.id, mod_art.\"targetArticleReferenceId\", change.\"articleModifierId\"\nFROM \"Change\" change JOIN \"ChangeModifyArticle\" mod_art ON change.id = mod_art.id\nUNION ALL\nSELECT change.id, mod_annex.\"targetAnnexReferenceId\", change.\"articleModifierId\"\nFROM \"Change\" change JOIN \"ChangeModifyTextAnnex\" mod_annex ON change.id = mod_annex.id\nUNION ALL\nSELECT change.id, ratify.\"targetResolutionReferenceId\", change.\"articleModifierId\"\nFROM \"Change\" change JOIN \"ChangeRatifyAdReferendum\" ratify ON change.id = ratify.id\nUNION ALL\nSELECT change.id, advanced.\"targetReferenceId\", change.\"articleModifierId\"\nFROM \"Change\" change JOIN \"ChangeAdvanced\" advanced ON change.id = advanced.id\n),\n\nStructuralCreationCatalog AS (\nSELECT\nadd_article.id AS change_id,\nchange.\"articleModifierId\" AS modifier_author_id,\n'ARTICLE'::text AS created_entity_type,\nCOALESCE(ref_resolution.initial, ref_annex.initial, ref_chapter.initial) AS root_res_initial,\nCOALESCE(ref_resolution.number, ref_annex.\"resNumber\", ref_chapter.\"resNumber\") AS root_res_number,\nCOALESCE(ref_resolution.year, ref_annex.year, ref_chapter.year) AS root_res_year,\nadd_article.\"newArticleNumber\" AS new_number,\nadd_article.\"newArticleSuffix\" AS new_suffix,\nNULL::int AS new_annex_number,\nCOALESCE(ref_annex.\"annexNumber\", ref_chapter.\"annexNumber\") AS created_in_annex_number,\nref_chapter.\"chapterNumber\" AS created_in_chapter_number,\nNULL::uuid AS physical_origin_id,\nCOALESCE(add_article.\"targetResolutionReferenceId\", add_article.\"targetAnnexReferenceId\", add_article.\"targetChapterReferenceId\") AS target_ref_id,\nCASE\nWHEN add_article.\"targetResolutionReferenceId\" IS NOT NULL THEN 'RESOLUTION'\nWHEN add_article.\"targetAnnexReferenceId\" IS NOT NULL THEN 'ANNEX'\nWHEN add_article.\"targetChapterReferenceId\" IS NOT NULL THEN 'CHAPTER'\nEND::text AS target_scope_type\nFROM \"Change\" change\nJOIN \"ChangeAddArticle\" add_article ON change.id = add_article.id\nLEFT JOIN \"ReferenceAnnex\" ref_annex ON add_article.\"targetAnnexReferenceId\" = ref_annex.id\nLEFT JOIN \"ReferenceChapter\" ref_chapter ON add_article.\"targetChapterReferenceId\" = ref_chapter.id\nLEFT JOIN \"ReferenceResolution\" ref_resolution ON add_article.\"targetResolutionReferenceId\" = ref_resolution.id\nWHERE (add_article.\"targetResolutionReferenceId\" IS NOT NULL OR add_article.\"targetAnnexReferenceId\" IS NOT NULL OR add_article.\"targetChapterReferenceId\" IS NOT NULL)\n\nUNION ALL\n\nSELECT\nadd_annex.id, change.\"articleModifierId\", 'ANNEX',\nCOALESCE(ref_resolution.initial, ref_parent_annex.initial),\nCOALESCE(ref_resolution.number, ref_parent_annex.\"resNumber\"),\nCOALESCE(ref_resolution.year, ref_parent_annex.year),\nNULL, NULL,\nadd_annex.\"newAnnexNumber\",\nNULL, NULL,\nsource_annex.\"annexId\",\nCOALESCE(add_annex.\"targetResolutionReferenceId\", add_annex.\"targetAnnexReferenceId\"),\nCASE\nWHEN add_annex.\"targetResolutionReferenceId\" IS NOT NULL THEN 'RESOLUTION'\nWHEN add_annex.\"targetAnnexReferenceId\" IS NOT NULL THEN 'ANNEX'\nEND\nFROM \"Change\" change\nJOIN \"ChangeAddAnnex\" add_annex ON change.id = add_annex.id\nLEFT JOIN \"ReferenceResolution\" ref_resolution ON add_annex.\"targetResolutionReferenceId\" = ref_resolution.id\nLEFT JOIN \"ReferenceAnnex\" ref_parent_annex ON add_annex.\"targetAnnexReferenceId\" = ref_parent_annex.id\nLEFT JOIN \"ReferenceAnnex\" source_annex ON add_annex.\"annexToAddReferenceId\" = source_annex.id\nWHERE (add_annex.\"targetResolutionReferenceId\" IS NOT NULL OR add_annex.\"targetAnnexReferenceId\" IS NOT NULL)\n),\n\n\nEntitySourceMap(entity_id, entity_type, change_id, modifier_author_id, physical_origin_id) AS (\nSELECT article.id, 'ARTICLE', article.\"addedByChangeId\", change.\"articleModifierId\", NULL::uuid\nFROM \"Article\" article JOIN \"Change\" change ON article.\"addedByChangeId\" = change.id\nWHERE article.\"addedByChangeId\" IS NOT NULL\nUNION ALL\nSELECT article.id, 'ARTICLE', article.\"newContentFromChangeId\", change.\"articleModifierId\", NULL::uuid\nFROM \"Article\" article JOIN \"Change\" change ON article.\"newContentFromChangeId\" = change.id\nWHERE article.\"newContentFromChangeId\" IS NOT NULL\nUNION ALL\nSELECT annex.id, 'ANNEX', annex.\"changeReplaceAnnexId\", change.\"articleModifierId\", NULL::uuid\nFROM \"Annex\" annex JOIN \"Change\" change ON annex.\"changeReplaceAnnexId\" = change.id\nWHERE annex.\"changeReplaceAnnexId\" IS NOT NULL\nUNION ALL\nSELECT ref_annex.\"annexId\", 'ANNEX', add_annex.id, change.\"articleModifierId\", ref_annex.\"annexId\"\nFROM \"ChangeAddAnnex\" add_annex JOIN \"Change\" change ON add_annex.id = change.id JOIN \"ReferenceAnnex\" ref_annex ON add_annex.\"annexToAddReferenceId\" = ref_annex.id\nWHERE ref_annex.\"annexId\" IS NOT NULL\nUNION ALL\nSELECT ref_annex.\"annexId\", 'ANNEX', replace_annex.id, change.\"articleModifierId\", ref_annex.\"annexId\"\nFROM \"ChangeReplaceAnnex\" replace_annex JOIN \"Change\" change ON replace_annex.id = change.id JOIN \"ReferenceAnnex\" ref_annex ON replace_annex.\"newAnnexReferenceId\" = ref_annex.id\nWHERE ref_annex.\"annexId\" IS NOT NULL\nUNION ALL\nSELECT ref_annex.\"annexId\", 'ANNEX', apply_mod.id, change.\"articleModifierId\", ref_annex.\"annexId\"\nFROM \"ChangeApplyModificationsAnnex\" apply_mod JOIN \"Change\" change ON apply_mod.id = change.id JOIN \"ReferenceAnnex\" ref_annex ON apply_mod.\"annexToApplyId\" = ref_annex.id\nWHERE ref_annex.\"annexId\" IS NOT NULL\n),\n\nTargetResolutionScope AS (\nSELECT target_resolution.id AS entity_id, 'RESOLUTION'::text AS entity_type, target_resolution.id AS root_id,\ntarget_resolution.initial AS root_res_initial, target_resolution.number AS root_res_number, target_resolution.year AS root_res_year,\nNULL::uuid AS causing_change_id, TRUE AS is_main_tree,\nNULL::int as scope_number, NULL::int as scope_suffix, NULL::int as scope_annex_number, NULL::int as scope_chapter_number,\nNULL::text as scope_container_type\nFROM \"Resolution\" target_resolution WHERE target_resolution.id = $1::uuid\nUNION ALL\nSELECT target_annex.id, 'ANNEX', target_resolution.id, target_resolution.initial, target_resolution.number, target_resolution.year, NULL::uuid, TRUE,\nNULL, NULL, target_annex.number, NULL, 'RESOLUTION'\nFROM \"Annex\" target_annex JOIN \"Resolution\" target_resolution ON target_annex.\"resolutionId\" = target_resolution.id WHERE target_resolution.id = $1::uuid\nUNION ALL\nSELECT target_chapter.id, 'CHAPTER', target_resolution.id, target_resolution.initial, target_resolution.number, target_resolution.year, NULL::uuid, TRUE,\nNULL, NULL, target_annex.number, target_chapter.number, 'ANNEX'\nFROM \"AnnexChapter\" target_chapter JOIN \"AnnexWithArticles\" awa ON target_chapter.\"annexId\" = awa.id JOIN \"Annex\" target_annex ON awa.id = target_annex.id JOIN \"Resolution\" target_resolution ON target_annex.\"resolutionId\" = target_resolution.id WHERE target_resolution.id = $1::uuid\nUNION ALL\nSELECT id, 'ARTICLE', \"rootResolutionId\", \"resInitial\", \"resNumber\", \"resYear\", NULL::uuid, TRUE,\nnumber, suffix, \"annexNumber\", \"chapterNumber\",\nCASE\nWHEN \"chapterNumber\" IS NOT NULL THEN 'CHAPTER'\nWHEN \"annexNumber\" IS NOT NULL THEN 'ANNEX'\nELSE 'RESOLUTION'\nEND\nFROM \"v_ArticleContext\" WHERE \"rootResolutionId\" = $1::uuid\n),\n\n\nChangeDiscovery(\nentity_id, entity_type, root_id, root_res_initial, root_res_number, root_res_year,\ncausing_change_id, is_main_tree,\nscope_number, scope_suffix, scope_annex_number, scope_chapter_number, scope_container_type\n) AS (\nSELECT * FROM TargetResolutionScope\n\nUNION ALL\n\nSELECT\nexpanded_hierarchy.id,\nexpanded_hierarchy.type,\nexpanded_hierarchy.root_id,\nexpanded_hierarchy.next_res_initial,\nexpanded_hierarchy.next_res_number,\nexpanded_hierarchy.next_res_year,\nmatch_result.change_id,\nexpanded_hierarchy.is_main_tree,\nexpanded_hierarchy.scope_number,\nexpanded_hierarchy.scope_suffix,\nexpanded_hierarchy.scope_annex_number,\nexpanded_hierarchy.scope_chapter_number,\nexpanded_hierarchy.scope_container_type\nFROM ChangeDiscovery scope\n\nCROSS JOIN LATERAL (\nSELECT ref_resolution.id FROM \"ReferenceResolution\" ref_resolution WHERE scope.entity_id IS NOT NULL AND scope.entity_type = 'RESOLUTION' AND ref_resolution.\"resolutionId\" = scope.entity_id\nUNION ALL\nSELECT ref_article.id FROM \"ReferenceArticle\" ref_article WHERE scope.entity_id IS NOT NULL AND scope.entity_type = 'ARTICLE' AND ref_article.\"articleId\" = scope.entity_id\nUNION ALL\nSELECT ref_annex.id FROM \"ReferenceAnnex\" ref_annex WHERE scope.entity_id IS NOT NULL AND scope.entity_type = 'ANNEX' AND ref_annex.\"annexId\" = scope.entity_id\nUNION ALL\nSELECT ref_chapter.id FROM \"ReferenceChapter\" ref_chapter WHERE scope.entity_id IS NOT NULL AND scope.entity_type = 'CHAPTER' AND ref_chapter.\"chapterId\" = scope.entity_id\n\nUNION ALL\n\nSELECT ref_coord.id FROM (\nSELECT ref_article.id FROM \"ReferenceArticle\" ref_article\nWHERE scope.entity_type = 'ARTICLE' AND ref_article.\"articleId\" IS NULL\nAND ref_article.\"initial\" = scope.root_res_initial AND ref_article.\"resNumber\" = scope.root_res_number AND ref_article.\"year\" = scope.root_res_year\nAND ref_article.\"articleNumber\" IS NOT DISTINCT FROM scope.scope_number\nAND COALESCE(ref_article.\"articleSuffix\",0) = COALESCE(scope.scope_suffix,0)\nAND (\n(scope.scope_container_type = 'RESOLUTION' AND ref_article.\"annexNumber\" IS NULL) OR\n(scope.scope_container_type = 'ANNEX' AND ref_article.\"annexNumber\" IS NOT DISTINCT FROM scope.scope_annex_number) OR\n(scope.scope_container_type = 'CHAPTER' AND ref_article.\"chapterNumber\" IS NOT DISTINCT FROM scope.scope_chapter_number)\n)\nUNION ALL\nSELECT ref_annex.id FROM \"ReferenceAnnex\" ref_annex\nWHERE scope.entity_type = 'ANNEX' AND ref_annex.\"annexId\" IS NULL\nAND ref_annex.\"initial\" = scope.root_res_initial AND ref_annex.\"resNumber\" = scope.root_res_number AND ref_annex.\"year\" = scope.root_res_year\nAND ref_annex.\"annexNumber\" IS NOT DISTINCT FROM scope.scope_annex_number\nAND (scope.scope_annex_number IS NOT NULL OR scope.scope_container_type = 'RESOLUTION')\nUNION ALL\nSELECT ref_chapter.id FROM \"ReferenceChapter\" ref_chapter\nWHERE scope.entity_type = 'CHAPTER' AND ref_chapter.\"chapterId\" IS NULL\nAND ref_chapter.\"initial\" = scope.root_res_initial AND ref_chapter.\"resNumber\" = scope.root_res_number AND ref_chapter.\"year\" = scope.root_res_year\nAND ref_chapter.\"annexNumber\" IS NOT DISTINCT FROM scope.scope_annex_number\nAND ref_chapter.\"chapterNumber\" IS NOT DISTINCT FROM scope.scope_chapter_number\nUNION ALL\nSELECT ref_resolution.id FROM \"ReferenceResolution\" ref_resolution\nWHERE scope.entity_type = 'RESOLUTION' AND ref_resolution.\"resolutionId\" IS NULL\nAND ref_resolution.\"initial\" = scope.root_res_initial AND ref_resolution.\"number\" = scope.root_res_number AND ref_resolution.\"year\" = scope.root_res_year\n) ref_coord\n) AS ref_match\n\nLEFT JOIN StructuralChangeMap structural_map ON ref_match.id = structural_map.target_ref_id\nLEFT JOIN ContentChangeMap content_map ON ref_match.id = content_map.target_ref_id\nLEFT JOIN StructuralCreationCatalog struct_creator ON struct_creator.target_ref_id = ref_match.id\nLEFT JOIN EntitySourceMap entity_source ON entity_source.entity_id = scope.entity_id AND entity_source.entity_type = scope.entity_type\nLEFT JOIN \"ReferenceArticle\" ref_article_lookup ON ref_match.id = ref_article_lookup.id\nLEFT JOIN \"ReferenceAnnex\" ref_annex_lookup ON ref_match.id = ref_annex_lookup.id\n\nCROSS JOIN LATERAL (\nSELECT structural_map.change_id, structural_map.modifier_author_id, NULL::text as virt_type,\nNULL::int as v_num, NULL::int as v_suf, NULL::int as v_annex_num, NULL::int as v_chap_num,\nstructural_map.physical_origin_id as v_origin_id,\nNULL::text as v_res_init, NULL::int as v_res_num, NULL::int as v_res_year\nWHERE structural_map.change_id IS NOT NULL\n\nUNION ALL\n\nSELECT content_map.change_id, content_map.modifier_author_id, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL\nWHERE content_map.change_id IS NOT NULL AND scope.is_main_tree = TRUE\n\nUNION ALL\n\nSELECT struct_creator.change_id, struct_creator.modifier_author_id,\nstruct_creator.created_entity_type,\nstruct_creator.new_number,\nstruct_creator.new_suffix,\nCOALESCE(struct_creator.new_annex_number, struct_creator.created_in_annex_number),\nstruct_creator.created_in_chapter_number,\nstruct_creator.physical_origin_id,\nstruct_creator.root_res_initial, struct_creator.root_res_number, struct_creator.root_res_year\nWHERE struct_creator.change_id IS NOT NULL\nAND (\n(struct_creator.new_number IS NOT NULL AND ref_article_lookup.id IS NOT NULL AND struct_creator.new_number = ref_article_lookup.\"articleNumber\")\nOR\n(struct_creator.new_annex_number IS NOT NULL AND ref_annex_lookup.id IS NOT NULL AND struct_creator.new_annex_number = ref_annex_lookup.\"annexNumber\")\nOR\n(\nstruct_creator.target_scope_type = scope.entity_type\nAND (\n(scope.entity_type = 'RESOLUTION' AND (\n(struct_creator.created_entity_type = 'ARTICLE' AND struct_creator.created_in_annex_number IS NULL) OR\n(struct_creator.created_entity_type = 'ANNEX')\n))\nOR\n(scope.entity_type = 'ANNEX' AND struct_creator.created_entity_type = 'ARTICLE'\nAND struct_creator.created_in_annex_number IS NOT DISTINCT FROM scope.scope_annex_number\nAND struct_creator.created_in_chapter_number IS NULL)\nOR\n(scope.entity_type = 'CHAPTER' AND struct_creator.created_entity_type = 'ARTICLE'\nAND struct_creator.created_in_annex_number IS NOT DISTINCT FROM scope.scope_annex_number\nAND struct_creator.created_in_chapter_number IS NOT DISTINCT FROM scope.scope_chapter_number)\n)\n)\n)\n\nUNION ALL\n\nSELECT entity_source.change_id, entity_source.modifier_author_id, NULL, NULL, NULL, NULL, NULL,\nentity_source.physical_origin_id,\nNULL, NULL, NULL\nWHERE entity_source.change_id IS NOT NULL\n) AS match_result\n\nLEFT JOIN \"v_ArticleContext\" author ON author.id = match_result.modifier_author_id\nLEFT JOIN EntitySourceMap author_originator ON author.id = author_originator.entity_id\nLEFT JOIN StructuralCreationCatalog author_creation ON author_originator.change_id = author_creation.change_id\n\nCROSS JOIN LATERAL (\nSELECT\nauthor.\"rootResolutionId\" AS id,\n'RESOLUTION'::text AS type,\nauthor.\"rootResolutionId\" AS root_id,\nCOALESCE(author_creation.root_res_initial, author.\"resInitial\") AS next_res_initial,\nCOALESCE(author_creation.root_res_number, author.\"resNumber\") AS next_res_number,\nCOALESCE(author_creation.root_res_year, author.\"resYear\") AS next_res_year,\nFALSE AS is_main_tree,\nCOALESCE(author_creation.new_number, author.number) AS scope_number,\nCOALESCE(author_creation.new_suffix, author.suffix) AS scope_suffix,\nCOALESCE(author_creation.new_annex_number, author_creation.created_in_annex_number, author.\"annexNumber\") AS scope_annex_number,\nCOALESCE(author_creation.created_in_chapter_number, author.\"chapterNumber\") AS scope_chapter_number,\n\nCASE\nWHEN COALESCE(author_creation.created_in_chapter_number, author.\"chapterNumber\") IS NOT NULL THEN 'CHAPTER'\nWHEN COALESCE(author_creation.new_annex_number, author_creation.created_in_annex_number, author.\"annexNumber\") IS NOT NULL THEN 'ANNEX'\nELSE 'RESOLUTION'\nEND AS scope_container_type\n\nUNION ALL\nSELECT author.\"rootAnnexId\", 'ANNEX', author.\"rootResolutionId\", author.\"resInitial\", author.\"resNumber\", author.\"resYear\", FALSE, NULL, NULL, NULL, NULL, 'RESOLUTION' WHERE author.\"rootAnnexId\" IS NOT NULL\nUNION ALL\nSELECT author.\"rootChapterId\", 'CHAPTER', author.\"rootResolutionId\", author.\"resInitial\", author.\"resNumber\", author.\"resYear\", FALSE, NULL, NULL, NULL, NULL, 'ANNEX' WHERE author.\"rootChapterId\" IS NOT NULL\nUNION ALL\nSELECT\nauthor.id,\n'ARTICLE',\nauthor.\"rootResolutionId\",\nCOALESCE(author_creation.root_res_initial, author.\"resInitial\"),\nCOALESCE(author_creation.root_res_number, author.\"resNumber\"),\nCOALESCE(author_creation.root_res_year, author.\"resYear\"),\nFALSE,\nCOALESCE(author_creation.new_number, author.number),\nCOALESCE(author_creation.new_suffix, author.suffix),\nCOALESCE(author_creation.new_annex_number, author_creation.created_in_annex_number, author.\"annexNumber\"),\nCOALESCE(author_creation.created_in_chapter_number, author.\"chapterNumber\"),\nCASE\nWHEN COALESCE(author_creation.created_in_chapter_number, author.\"chapterNumber\") IS NOT NULL THEN 'CHAPTER'\nWHEN COALESCE(author_creation.new_annex_number, author_creation.created_in_annex_number, author.\"annexNumber\") IS NOT NULL THEN 'ANNEX'\nELSE 'RESOLUTION'\nEND\n\nUNION ALL\n\nSELECT\nNULL::uuid,\nmatch_result.virt_type,\nscope.root_id,\nCOALESCE(match_result.v_res_init, scope.root_res_initial),\nCOALESCE(match_result.v_res_num, scope.root_res_number),\nCOALESCE(match_result.v_res_year, scope.root_res_year),\nTRUE,\nmatch_result.v_num, match_result.v_suf, match_result.v_annex_num, match_result.v_chap_num,\nscope.entity_type\nWHERE match_result.virt_type IS NOT NULL\n\nUNION ALL\n\nSELECT\nexploded_article.id, 'ARTICLE',\nscope.root_id, scope.root_res_initial, scope.root_res_number, scope.root_res_year,\nTRUE,\nexploded_article.number, exploded_article.suffix,\nmatch_result.v_annex_num,\nexploded_chapter.number,\nCASE WHEN exploded_chapter.id IS NOT NULL THEN 'CHAPTER' ELSE 'ANNEX' END\nFROM \"Article\" exploded_article\nLEFT JOIN \"AnnexChapter\" exploded_chapter ON exploded_article.\"chapterId\" = exploded_chapter.id\nWHERE scope.is_main_tree = TRUE\nAND match_result.virt_type = 'ANNEX'\nAND match_result.v_origin_id IS NOT NULL\nAND (exploded_article.\"annexId\" = match_result.v_origin_id OR exploded_chapter.\"annexId\" = match_result.v_origin_id)\n\nUNION ALL\n\nSELECT\nexploded_chapter.id, 'CHAPTER',\nscope.root_id, scope.root_res_initial, scope.root_res_number, scope.root_res_year,\nTRUE,\nNULL, NULL,\nmatch_result.v_annex_num,\nexploded_chapter.number,\n'ANNEX'\nFROM \"AnnexChapter\" exploded_chapter\nWHERE scope.is_main_tree = TRUE\nAND match_result.virt_type = 'ANNEX'\nAND match_result.v_origin_id IS NOT NULL\nAND exploded_chapter.\"annexId\" = match_result.v_origin_id\n\nUNION ALL\n\nSELECT\norigin_annex.id, 'ANNEX',\norigin_res.id, origin_res.initial, origin_res.number, origin_res.year,\nFALSE,\nNULL, NULL, origin_annex.number, NULL, 'RESOLUTION'\nFROM \"Annex\" origin_annex\nJOIN \"Resolution\" origin_res ON origin_annex.\"resolutionId\" = origin_res.id\nWHERE match_result.v_origin_id IS NOT NULL\nAND origin_annex.id = match_result.v_origin_id\n\n) expanded_hierarchy\n)\nCYCLE entity_id SET is_cycle USING path\n\nSELECT DISTINCT\ncd.causing_change_id AS id,\nr_modifier.date AS date\nFROM ChangeDiscovery cd\nJOIN \"Change\" c ON cd.causing_change_id = c.id\nJOIN \"v_ArticleContext\" author_ctx ON c.\"articleModifierId\" = author_ctx.id\nJOIN \"Resolution\" r_modifier ON author_ctx.\"rootResolutionId\" = r_modifier.id\nWHERE cd.causing_change_id IS NOT NULL\nAND NOT cd.is_cycle;") as (targetResolutionUUUID: string) => $runtime.TypedSql<getRelevantChanges.Parameters, getRelevantChanges.Result>

export namespace getRelevantChanges {
  export type Parameters = [targetResolutionUUUID: string]
  export type Result = {
    id: string | null
    date: Date
  }
}
